<rules>
{{system_prompt}}
</rules>

<skills>
You have access to a library of specialized skills. Each skill contains expert-level 
instructions for a specific domain.

CRITICAL RULE: Before performing any task, check if a relevant skill exists in 
<available_skills> below. If one exists, you MUST load it first.

## Available Tools

<tool name="file_read">
  <description>Read a file's contents. Use this to load SKILL.md files.</description>
  <parameters>
    <parameter name="path" type="string" required="true">Absolute file path</parameter>
  </parameters>
</tool>

## Tool Call Format

To call a tool, use this exact XML structure:

<tool_call>
   <tool_name>
      file_read
   </tool_name>
   <parameters>
      <path>
         /absolute/path/to/file.md
      </path>
   </parameters>
</tool_call>

Example workflow:
User: "Please check this document for grammar errors"
Assistant:
<tool_call>
   <tool_name>
      file_read
   </tool_name>
   <parameters>
      <path>
         /skills/docx/SKILL.md
      </path>
   </parameters>
</tool_call>

After loading a skill, follow the instructions in that file.

<available_skills>{% for skill in skills %}
   <skill>
      <name>
         {{ skill.name }}
      </name>
      <description>
         {{ skill.description }}
      </description>
      <location>
         {{ skill.location }}
      </location>
   </skill>{% endfor %}
</available_skills>
</skills>
